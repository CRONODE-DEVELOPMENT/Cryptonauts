<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Cryptonauts Leaderboards</title>
  <link rel="preload" href="Geomanist-Bold.otf" as="font" type="font/otf" crossorigin="anonymous">
  <style>
    :root {
      --primary-color: #66bfff;
      --background-dark: #000;
      --text-dark: #fff;
      --text-light: #000;
      --collection-bg: #1a1a1a;
      --shadow: 0 2px 4px rgba(255,255,255,0.1);
    }

    @font-face {
      font-family: 'Geomanist-Bold';
      src: url('Geomanist-Bold.otf') format('opentype');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    body {
      font-family: 'Geomanist-Bold', sans-serif;
      line-height: 1.6;
      margin: 0;
      background-color: var(--background-dark);
      color: var(--text-dark);
      padding: 20px;
      transition: background-color 0.3s, color 0.3s;
    }

    body.light-mode {
      background-color: #f5f5f5;
      color: var(--text-light);
    }

    h1, h2, h3 {
      color: var(--text-dark);
    }

    body.light-mode h1 {
      color: var(--text-light);
    }

    .collection h2,
    .collection h3,
    .summary h2,
    .summary h3 {
      color: var(--text-dark);
    }

    ul {
      list-style-type: none;
      padding-left: 0;
    }

    li {
      margin-bottom: 5px;
    }

    .collection ul li::before,
    #global-owners li::before {
      content: '•';
      color: var(--text-dark);
      margin-right: 8px;
    }

    .collection ul li,
    #global-owners li {
      color: var(--text-dark);
    }

    a {
      color: var(--primary-color);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    header img {
      display: block;
      margin: 0 auto 20px;
      width: 100%;
      max-width: 900px;
      height: auto;
    }

    .collection-list, .leaderboard-section {
      margin-bottom: 30px;
    }

    .collection {
      margin-bottom: 20px;
      padding: 15px;
      background-color: var(--collection-bg);
      border-radius: 15px;
      box-shadow: var(--shadow);
    }

    .collection-header {
      display: flex;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .collection-image {
      width: 110px;
      height: 110px;
      border-radius: 15px;
      flex-shrink: 0;
    }

    .title-container {
      flex-grow: 1;
      text-align: center;
    }

    .toggle-btn {
      cursor: pointer;
      color: var(--primary-color);
      padding: 5px 10px;
      font-weight: 700;
      text-transform: uppercase;
      transition: transform 0.2s;
    }

    .toggle-btn:hover {
      text-decoration: underline;
    }

    .toggle-btn:active {
      transform: scale(0.95);
    }

    .hidden {
      display: none;
    }

    .summary {
      padding: 20px;
      background-color: var(--collection-bg);
      border-radius: 15px;
      box-shadow: var(--shadow);
    }

    #searchInput, #sortSelect {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border-radius: 8px;
      border: none;
      font-size: 16px;
    }

    .theme-toggle {
      padding: 8px 16px;
      background-color: var(--primary-color);
      color: var(--text-dark);
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Geomanist-Bold', sans-serif;
    }

    body.light-mode .theme-toggle {
      color: var(--text-light);
    }

    .footer {
      text-align: center;
      margin-top: 40px;
      padding: 20px 0;
    }

    .footer-content {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      font-size: 15px;
      color: var(--text-dark);
    }

    body.light-mode .footer-content {
      color: var(--text-light);
    }

    @media screen and (max-width: 600px) {
      h2 {
        font-size: 1.2rem;
      }
      .collection-header {
        flex-direction: column;
        align-items: center;
      }
      .collection-image {
        width: 90px;
        height: 90px;
      }
      .toggle-btn {
        font-size: 14px;
      }
      .footer-content {
        flex-direction: column;
        gap: 5px;
      }
    }

    @media screen and (min-width: 601px) {
      #searchInput, #sortSelect {
        width: 200px;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="Header.jpg" alt="Cryptonauts Leaderboard Header Banner">
  </header>
  
  <main>
    <section class="collection-list">
      <h1>Collections</h1>
      <div id="collections"></div>
    </section>
  </main>
  <footer class="footer">
    <div class="footer-content">
      <div>CRONOBOTS | CRONOS DEVELOPMENT</div>
      <button class="theme-toggle" aria-label="Toggle light/dark mode">Toggle Theme</button>
    </div>
  </footer>

  <script>
    // Données des collections
    const collectionsData = [
      {
        id: "legendary",
        title: "Legendary Cryptonauts",
        image: "Legend.png",
        alt: "Legendary Cryptonauts Collection Icon",
        date: "SUMMER 2025",
        ownersCount: 0,
        owners: [],
      },
      {
        id: "collection-0",
        title: "TIME TRAVEL Cryptonauts",
        image: "https://media.nft.crypto.com/3f03eae4-d4db-4ec8-96cd-ff53a95403d0/original.jpg?d=lg-logo5",
        alt: "TIME TRAVEL Cryptonauts Collection Icon",
        ownersCount: 107,
        owners: [
          { name: "tohmee110", url: "https://crypto.com/nft/profile/tohmee110", count: 32, rank: "gold" },
          { name: "jamus0", url: "https://crypto.com/nft/profile/jamus0", count: 28, rank: "silver" },
          { name: "ethorne77", url: "https://crypto.com/nft/profile/ethorne77", count: 27, rank: "bronze" },
          { name: "wisdomskingdom91", url: "https://crypto.com/nft/profile/wisdomskingdom91", count: 22 },
          { name: "cryptocomnft19", url: "https://crypto.com/nft/profile/cryptocomnft19", count: 17 },
          { name: "amondias83", url: "https://crypto.com/nft/profile/amondias83", count: 14 },
        ],
      },
      {
        id: "collection-1",
        title: "Quantum Cryptonauts V2",
        image: "https://media.nft.crypto.com/c19a171b-0418-4eb2-b3c1-1dcb84616c52/original.jpg?d=lg-logo",
        alt: "Quantum Cryptonauts V2 Collection Icon",
        ownersCount: 73,
        owners: [
          { name: "noleaster", url: "https://crypto.com/nft/profile/noleaster", count: 17, rank: "gold" },
          { name: "amondias83", url: "https://crypto.com/nft/profile/amondias83", count: 13, rank: "silver" },
          { name: "ethorne77", url: "https://crypto.com/nft/profile/ethorne77", count: 13, rank: "bronze" },
          { name: "onmywayup1", url: "https://crypto.com/nft/profile/onmywayup1", count: 9 },
          { name: "nft_master_goat", url: "https://crypto.com/nft/profile/nft_master_goat", count: 9 },
          { name: "ndaconstruct021", url: "https://crypto.com/nft/profile/ndaconstruct021", count: 9 },
        ],
      },
      {
        id: "collection-2",
        title: "Quantum Cryptonauts",
        image: "https://media.nft.crypto.com/395953dd-72fe-49ba-acb0-f638166b87ae/original.jpg?d=lg-logo",
        alt: "Quantum Cryptonauts Collection Icon",
        ownersCount: 108,
        owners: [
          { name: "onmywayup1", url: "https://crypto.com/nft/profile/onmywayup1", count: 47, rank: "gold" },
          { name: "mikezx1200", url: "https://crypto.com/nft/profile/mikezx1200", count: 23, rank: "silver" },
          { name: "wisdomskingdom91", url: "https://crypto.com/nft/profile/wisdomskingdom91", count: 14, rank: "bronze" },
          { name: "adriserpico", url: "https://crypto.com/nft/profile/adriserpico", count: 14 },
          { name: "noleaster", url: "https://crypto.com/nft/profile/noleaster", count: 14 },
          { name: "cryptocomnft19", url: "https://crypto.com/nft/profile/cryptocomnft19", count: 12 },
        ],
      },
      {
        id: "collection-3",
        title: "Cryptonauts 2024",
        image: "https://media.nft.crypto.com/84f5f042-7cb0-404f-88d2-43d07a6d2a46/original.jpg?d=lg-logo",
        alt: "Cryptonauts 2024 Collection Icon",
        ownersCount: 148,
        owners: [
          { name: "stackse215", url: "https://crypto.com/nft/profile/stackse215", count: 14, rank: "gold" },
          { name: "hazekrwlng094", url: "https://crypto.com/nft/profile/hazekrwlng094", count: 12, rank: "silver" },
          { name: "frflooring", url: "https://crypto.com/nft/profile/frflooring", count: 12, rank: "bronze" },
          { name: "rymoreason", url: "https://crypto.com/nft/profile/rymoreason", count: 12 },
          { name: "liz_trevino53587", url: "https://crypto.com/nft/profile/liz_trevino53587", count: 10 },
          { name: "gringotwinkie", url: "https://crypto.com/nft/profile/gringotwinkie", count: 6 },
        ],
      },
      {
        id: "collection-4",
        title: "Cryptonauts Golden Crew",
        image: "https://media.nft.crypto.com/6d6e7a76-35f6-4918-b851-ddebabf94e2c/original.jpg?d=lg-logo",
        alt: "Cryptonauts Golden Crew Collection Icon",
        ownersCount: 9,
        owners: [
          { name: "cabezaenlasnubes", url: "https://crypto.com/nft/profile/cabezaenlasnubes", count: 3, rank: "gold" },
          { name: "ben__crypto23", url: "https://crypto.com/nft/profile/ben__crypto23", count: 2, rank: "silver" },
          { name: "ethorne77", url: "https://crypto.com/nft/profile/ethorne77", count: 1, rank: "bronze" },
          { name: "omgwtf", url: "https://crypto.com/nft/profile/omgwtf", count: 1 },
          { name: "chionna", url: "https://crypto.com/nft/profile/chionna", count: 1 },
          { name: "jamus0", url: "https://crypto.com/nft/profile/jamus0", count: 1 },
          { name: "kidprocro", url: "https://crypto.com/nft/profile/kidprocro", count: 1 },
          { name: "amondias83", url: "https://crypto.com/nft/profile/amondias83", count: 1 },
          { name: "onmywayup1", url: "https://crypto.com/nft/profile/onmywayup1", count: 1 },
        ],
      },
      {
        id: "collection-5",
        title: "Cryptonauts: The dark side of the dune",
        image: "https://media.nft.crypto.com/f3bdf36b-403b-4799-a39f-2c21cea5dc99/original.jpg?d=lg-logo",
        alt: "Cryptonauts: The dark side of the dune Collection Icon",
        ownersCount: 126,
        owners: [
          { name: "echotpull050", url: "https://crypto.com/nft/profile/echotpull050", count: 15, rank: "gold" },
          { name: "drewcotton70", url: "https://crypto.com/nft/profile/drewcotton70", count: 10, rank: "silver" },
          { name: "euphoricsalvia", url: "https://crypto.com/nft/profile/euphoricsalvia", count: 9, rank: "bronze" },
          { name: "aquacoin", url: "https://crypto.com/nft/profile/aquacoin", count: 8 },
          { name: "santa61", url: "https://crypto.com/nft/profile/santa61", count: 7 },
          { name: "stackse215", url: "https://crypto.com/nft/profile/stackse215", count: 7 },
        ],
      },
      {
        id: "collection-6",
        title: "Cryptonauts",
        image: "https://media.nft.crypto.com/5057c430-e7f5-4462-a6d2-7bb2bfb68700/original.jpg?d=lg-logo",
        alt: "Cryptonauts Collection Icon",
        ownersCount: 225,
        owners: [
          { name: "santa61", url: "https://crypto.com/nft/profile/santa61", count: 19, rank: "gold" },
          { name: "onmywayup1", url: "https://crypto.com/nft/profile/onmywayup1", count: 13, rank: "silver" },
          { name: "vault_327", url: "https://crypto.com/nft/profile/vault_327", count: 9, rank: "bronze" },
          { name: "cyberpaw", url: "https://crypto.com/nft/profile/cyberpaw", count: 8 },
          { name: "pushmedia", url: "https://crypto.com/nft/profile/pushmedia", count: 7 },
          { name: "siguenzamc3", url: "https://crypto.com/nft/profile/siguenzamc3", count: 7 },
        ],
      },
    ];

    // Données des propriétaires globaux
    const globalOwnersData = [
      { name: "onmywayup1", url: "https://crypto.com/nft/profile/onmywayup1", count: 79, rank: "gold" },
      { name: "ethorne77", url: "https://crypto.com/nft/profile/ethorne77", count: 43, rank: "silver" },
      { name: "jamus0", url: "https://crypto.com/nft/profile/jamus0", count: 36, rank: "bronze" },
      { name: "wisdomskingdom91", url: "https://crypto.com/nft/profile/wisdomskingdom91", count: 36 },
      { name: "tohmee110", url: "https://crypto.com/nft/profile/tohmee110", count: 35 },
      { name: "rymoreason", url: "https://crypto.com/nft/profile/rymoreason", count: 33 },
    ];

    // Validation des URLs
    function validateUrl(url) {
      return url.startsWith('https://crypto.com/nft/profile/') ? url : '#';
    }

    // Générer une collection
    function renderCollection(collection) {
      const div = document.createElement('div');
      div.className = 'collection';
      div.innerHTML = `
        <div class="collection-header">
          <img src="${collection.image}" alt="${collection.alt}" class="collection-image">
          <div class="title-container">
            <h2>${collection.title}</h2>
            ${collection.date ? `<span style="color: #cc8834; font-weight: 700; margin-top: 8px;">${collection.date}</span>` : ''}
            ${collection.owners.length ? `<span class="toggle-btn" data-section-id="${collection.id}" aria-controls="${collection.id}" aria-expanded="false" aria-label="Toggle ${collection.title} owners">Show owners</span>` : ''}
          </div>
        </div>
        ${collection.owners.length ? `
          <div id="${collection.id}" class="hidden">
            <h3>OWNERS: ${collection.ownersCount}</h3>
            <ul>
              ${collection.owners.map(owner => `
                <li ${owner.rank ? `style="color: ${owner.rank === 'gold' ? 'gold' : owner.rank === 'silver' ? 'silver' : '#cd7f32'}; font-weight: bold;"` : ''}>
                  <a href="${validateUrl(owner.url)}" target="_blank" rel="noopener noreferrer">${owner.name}</a> : ${owner.count} Cryptonauts
                  ${owner.rank === 'gold' ? '🥇' : owner.rank === 'silver' ? '🥈' : owner.rank === 'bronze' ? '🥉' : ''}
                </li>
              `).join('')}
            </ul>
          </div>
        ` : ''}
      `;
      return div;
    }

    // Générer le récapitulatif
    function renderGlobalOwners(owners) {
      const section = document.createElement('section');
      section.className = 'leaderboard-section';
      section.innerHTML = `
        <h1>Leaderboards</h1>
        <div class="summary">
          <h2>Total Owners: 623</h2>
          <input type="text" id="searchInput" placeholder="Search owner..." aria-label="Search owners">
          <select id="sortSelect" aria-label="Sort owners">
            <option value="count-desc">Sort by Count (High to Low)</option>
            <option value="count-asc">Sort by Count (Low to High)</option>
            <option value="name-asc">Sort by Name (A-Z)</option>
            <option value="name-desc">Sort by Name (Z-A)</option>
          </select>
          <ul id="global-owners">
            ${owners.map(owner => `
              <li ${owner.rank ? `style="color: ${owner.rank === 'gold' ? 'gold' : owner.rank === 'silver' ? 'silver' : '#cd7f32'}; font-weight: bold;"` : ''}>
                <a href="${validateUrl(owner.url)}" target="_blank" rel="noopener noreferrer">${owner.name}</a> : ${owner.count} Cryptonauts
                ${owner.rank === 'gold' ? '🥇' : owner.rank === 'silver' ? '🥈' : owner.rank === 'bronze' ? '🥉' : ''}
              </li>
            `).join('')}
          </ul>
        </div>
      `;
      return section;
    }

    // Débouncing
    function debounce(func, wait) {
      let timeout;
      return function (...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), wait);
      };
    }

    // Initialisation
    document.addEventListener('DOMContentLoaded', () => {
      const collectionsContainer = document.getElementById('collections');
      const main = document.querySelector('main');

      // Valider les URLs
      collectionsData.forEach(collection => {
        collection.owners.forEach(owner => {
          owner.url = validateUrl(owner.url);
        });
      });
      globalOwnersData.forEach(owner => {
        owner.url = validateUrl(owner.url);
      });

      // Rendre les collections
      collectionsData.forEach(collection => {
        collectionsContainer.appendChild(renderCollection(collection));
      });

      // Rendre le récapitulatif
      main.appendChild(renderGlobalOwners(globalOwnersData));

      // Gestion des boutons de bascule
      const toggleButtons = document.querySelectorAll('.toggle-btn');
      toggleButtons.forEach(button => {
        button.addEventListener('click', () => {
          const sectionId = button.getAttribute('data-section-id');
          const section = document.getElementById(sectionId);
          if (section) {
            const isHidden = section.classList.contains('hidden');
            section.classList.toggle('hidden', !isHidden);
            button.textContent = isHidden ? 'Hide owners' : 'Show owners';
            button.setAttribute('aria-expanded', isHidden);
          }
        });
      });

      // Gestion de la recherche
      const searchInput = document.getElementById('searchInput');
      const listItems = document.querySelectorAll('#global-owners li');
      searchInput.addEventListener('input', debounce(() => {
        const filter = searchInput.value.toLowerCase();
        let found = false;
        listItems.forEach(item => {
          const text = item.textContent.toLowerCase();
          const match = text.includes(filter);
          item.style.display = match ? '' : 'none';
          if (match) found = true;
        });
        const noResults = document.getElementById('no-results');
        if (!found) {
          if (!noResults) {
            const msg = document.createElement('li');
            msg.id = 'no-results';
            msg.textContent = 'No results found';
            msg.style.color = 'gray';
            document.getElementById('global-owners').appendChild(msg);
          }
        } else {
          if (noResults) noResults.remove();
        }
      }, 300));

      // Gestion du tri
      const sortSelect = document.getElementById('sortSelect');
      sortSelect.addEventListener('change', () => {
        const value = sortSelect.value;
        const sortedOwners = [...globalOwnersData];
        if (value === 'count-desc') {
          sortedOwners.sort((a, b) => b.count - a.count);
        } else if (value === 'count-asc') {
          sortedOwners.sort((a, b) => a.count - b.count);
        } else if (value === 'name-asc') {
          sortedOwners.sort((a, b) => a.name.localeCompare(b.name));
        } else if (value === 'name-desc') {
          sortedOwners.sort((a, b) => b.name.localeCompare(a.name));
        }
        const globalOwnersUl = document.getElementById('global-owners');
        globalOwnersUl.innerHTML = sortedOwners.map(owner => `
          <li ${owner.rank ? `style="color: ${owner.rank === 'gold' ? 'gold' : owner.rank === 'silver' ? 'silver' : '#cd7f32'}; font-weight: bold;"` : ''}>
            <a href="${validateUrl(owner.url)}" target="_blank" rel="noopener noreferrer">${owner.name}</a> : ${owner.count} Cryptonauts
            ${owner.rank === 'gold' ? '🥇' : owner.rank === 'silver' ? '🥈' : owner.rank === 'bronze' ? '🥉' : ''}
          </li>
        `).join('');
      });

      // Gestion du mode sombre/clair
      const themeToggle = document.querySelector('.theme-toggle');
      themeToggle.addEventListener('click', () => {
        document.body.classList.toggle('light-mode');
        themeToggle.textContent = document.body.classList.contains('light-mode') ? 'Dark Mode' : 'Light Mode';
      });
    });
  </script>
</body>
</html>
